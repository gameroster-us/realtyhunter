<script>
  function initialize() {
    $(".map-container").geocomplete({
      map: "#map_canvas",
      location: "<%= @office.formatted_street_address %>" ,
      details: ".details"
    }).bind("geocode:result", function(event, result){
        //console.log(result);
    }).bind("geocode:error", function(event, result){
        //console.log("[ERROR]: " + result);
    });
  };
  $(document).ready(initialize);
</script>

<% provide(:title, 'Office') %>

<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <div class="page-header">
      <div class="row">
        <div class="col-md-7">
          <h1><%= @office.name.titleize %> Office</h1>
          <%= @office.company.name %>
        </div>
        <div class="col-md-5 right">
          <br /><br />
          <br />
          <%= link_to 'Edit', edit_company_office_path(@office.company, @office) %> | 
          <%= link_to 'All Offices', company_offices_path %> | 
          <%= link_to 'View Company', company_path(@office.company) %>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <%= @office.formatted_street_address %>
      </div>
      <div class="col-md-3 right">
        <strong>t</strong> | <%= @office.telephone %>
      </div>
      <div class="col-md-3 right">
        <% if @office.fax %>
          <strong>f</strong> | <%= @office.fax %>
        <% end %>
      </div>
    </div>

    <br />
    <div class="row map-container">
      <div class="col-md-12">
        <div id="map_canvas"></div>
      </div>
    </div>

    <br />
    <div class="row">
      <div class="col-md-12">
        <strong>Managers:</strong>
      </div>
    </div>
    <div class="row">
      <% for i in 0..@office.managers.length-1 %>
        <% if i % 4 == 0 && i > 0 %>
          </div>
          <div class="row">
        <% end %>
        <div class="col-md-3">
          <%= link_to @office.managers[i].name, @office.managers[i] %>
        </div>
      <% end %>
    </div>

    <br />
    <div class="row">
      <div class="col-md-12">
        <strong>Agents:</strong>
      </div>
    </div>
    <div class="row">
      <% for i in 0..@office.agents.length-1 %>
        <% if i % 4 == 0 && i > 0 %>
          </div>
          <div class="row">
        <% end %>
        <div class="col-md-3">
          <%= link_to @office.agents[i].name, @office.agents[i] %>
        </div>
      <% end %>
    </div>

  </div>

 </div>

