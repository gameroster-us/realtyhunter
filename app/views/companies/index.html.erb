<% provide(:title, 'Companies') %>
<h1 class="page-header">Companies</h1>

<div class="row">
  <div class="col-md-2">
    <%= form_tag companies_path, :method => 'get' do %>
      Search:
      <%= text_field_tag :search, params[:search], placeholder: "name", size: 50 %>
      <%= submit_tag "Go", :name => nil %>
      <%= link_to "Clear All Filters", companies_path, class: 'btn btn-xs btn-default' %>
    <% end %>
  </div>
  <div class="col-md-offset-10">
    <%= link_to 'Add a Company', new_company_path %>
    <%= will_paginate @companies %>
  </div>
</div>

<div class="row">
  <div class="col-md-12">

    <table class="table table-striped table-hover table-condensed table-responsive">
      <thead>
        <tr>
          <th>Logo</th>
          <th>Name</th>
          <th colspan="1"></th>
        </tr>
      </thead>

      <tbody>
        <% @companies.each do |company| %>
          <tr>
            <td>
              <% if company.logo_id? %>
                <%= attachment_image_tag(company, :logo, :fill, 300, 300) %>
              <% else %>
                no photo
              <% end %>
            </td>
            <td><%= link_to company.name, company %></td>
            <td>
              <% if can? :update, company %>
                <%= link_to 'Edit', edit_company_path(company) %> | 
                <%= link_to 'Delete', company, method: :delete, data: { confirm: 'Are you sure?' } %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>

  </div>
</div>