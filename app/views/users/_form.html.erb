<div class="row">
  <div class="col-md-6">
      <!-- User image form -->
      <div class="row">
        <div class="col-md-12">
          <div class="avatar">
            <%= render 'image', :locals => {:user => @user} %>
          </div>
        </div>
      </div>

      <% if current_user.is_management? %>
        <br />
        <div class="row">
          <div class="col-md-12">
            <%= form_for(@user, :url => upload_image_user_path(@user), 
              html: {multipart: true}, method: :post) do |f| %>
              <%= f.file_field :file %><br>
              <%= f.submit "Upload Photo", class: "btn btn-warning" %>
            <% end %>
          </div>
        </div>
      <% else %>
      <br />
        <p>(Photo, bio, and employee title are only editable by company management.)</p><br />
      <% end %>
  </div>

  <div class="col-md-6">
    <!-- All other fields form -->
    <%= form_for(@user) do |f| %>
      <%= render :partial => 'shared/error_messages', 
        :locals => {:model => @user} %>

      <div class="field">
        <%= f.label :email, "Email (Will be your username)", class: 'required' %><br>
        <%= f.email_field :email, class: 'form-control', 
            :required => true %>
      </div>
      
      <div class="field">
        <%= f.label :name, "Name", class: 'required' %><br>
        <%= f.text_field :name, class: 'form-control', 
            :required => true %>
      </div>
      <div class="field">
        <%= f.label :mobile_phone_number, "Mobile", class: 'required' %><br>
        <%= f.telephone_field :mobile_phone_number, placeholder: "(XXX)XXX-XXXX",
            class: 'form-control' %>
      </div>
      <% if current_user.is_management? %>
        <div class="field">
          <%= f.label :bio, "Short Bio (Max 500 chars)" %><br>
          <%= f.text_area :bio, class: 'form-control', :size => "20x10" %>
        </div>
      <% end %>

      <div class="field">
        <%= f.label :office_id, "Office", class: 'required' %><br>
        <%= f.select(:office_id, options_for_select(@user.company.offices.collect {|t| [t.name.titleize, t.id]}, [@user.office.id]), 
          {prompt: "Choose one..."},
          :required => true, 
          class: 'form-control',
          :include_blank => true) %>
      </div>

      <div class="row">

        <% if current_user.is_management? %>
        <div class="col-md-6">
          <div class="field">
            <%= f.label :employee_title_id, "Role in the company", class: 'required' %><br>
            <%= f.select(:employee_title_id, options_for_select(EmployeeTitle.all.collect {|t| [t.name.titleize, t.id]}, 
              [@user.employee_title.id]), 
              {prompt: "Choose one..."},
              :required => true, 
              class: 'form-control',
              :include_blank => true,
              data: { 
                agent_title_name: @agent_title.name,
                user_title_name: @user.employee_title.name
              }) %>
          </div>
        </div>
        <% end %>

        <div class="col-md-6 agent-type">
          <div class="field " >
            <%= f.label :agent_types, "Specialization Area", class: 'required' %><br>
            <%= f.select(:agent_types, options_for_select(AgentType.all.collect {|t| [t.name.titleize]}, @user.agent_specialties),
                {},
                {
                :multiple => true,
                class: 'form-control' } ) %>
          </div>
        </div>
      </div>

      <div class="field">
        <%= f.label :password, "Password" %><br>
        <%= f.password_field :password, class: 'form-control' %>
      </div>
      <div class="field">
        <%= f.label :password_confirmation, "Confirmation" %><br>
        <%= f.password_field :password_confirmation, class: 'form-control' %>
      </div>
      <div class="actions">
        <%= f.submit class: "btn btn-warning" %>
      </div>
    <% end %>    
  </div>
</div>
