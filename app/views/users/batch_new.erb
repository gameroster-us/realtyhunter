<script>
  $( document ).ready(function() {
      $('.agent-type').hide();
  });

  function title_onchange_handler(input) {
    if (input.toLowerCase() === '<%= @agent_title.name %>') {
      $('.agent-type').show();
    } else {
      $('.agent-type').hide();
    }
  };
</script>


<% provide(:title, 'Admin User Signup') %>

<div class="row">
  <div class="col-md-12">
    <h1><%= @company.name.titleize %> - Admin Batch Signup</h1>
    
    <!--%= render 'new_user_form' %-->
    <%= form_for(@user, :url => users_batch_create_path(@user), html: { class: "directUpload" }) do |f| %>
      <%= render 'shared/user_error_messages' %>

      <div class="row">
  <div class="col-md-3">
    <div class="field">
      <%= f.label :name, "Name" %><br>
      <%= f.text_field :name, class: 'form-control' %>
    </div>
  </div>
  <div class="col-md-3">
    <div class="field">
      <%= f.label :email, "Email (username)" %><br>
      <%= f.email_field :email, class: 'form-control' %>
    </div>
  </div>

  <div class="col-md-2">
    <div class="field">
      <%= f.label :office_id, "Office" %><br>
      <%= f.select(:office_id, options_for_select(@company.offices.collect {|t| [t.name.titleize, t.id]}), 
        {prompt: "Choose one..."},
        :required => true, 
        class: 'form-control',
        :include_blank => true) %>
    </div>
  </div>

  <div class="col-md-2">
      <div class="field">
        <%= f.label :employee_title_id, "Role within the company" %><br>
        <%= f.select(:employee_title_id, options_for_select(EmployeeTitle.all.collect {|t| [t.name.titleize, t.id]}), 
          {prompt: "Choose one..."},
          :onchange => "title_onchange_handler($(this).find('option:selected').text())",
          :required => true, 
          class: 'form-control',
          :include_blank => true) %>
      </div>
    </div>

    <div class="col-md-2 agent-type">
      <div class="field " >
        <%= f.label :agent_types, "Specialty Areas" %><br>
        <%= f.select(:agent_types, options_for_select(AgentType.all.collect {|t| [t.name.titleize]}, ['Residential']),
            {},
            {
            :multiple => true,
            class: 'form-control' } ) %>
      </div>
    </div>

</div>

      <!--%= link_to 'Add another row', :remote => true %-->
      <br /><br />
      <div class="actions">
        <%= f.submit class: "btn btn-primary" %>
      </div>
    <% end %>

  </div>
</div>
